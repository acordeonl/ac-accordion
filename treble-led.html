<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/ac-view/ac-led-behavior.html">
<!--

Shows drop down menu (works on chrome)

### Usage
The list displayed in the drop down menu can be set as an attribute.

    <drop-menu list-items='["first" ,"second"]'></drop-menu>

For an overlayed drop menu:

    <drop-menu overlay-menu list-items='["first" ,"second"]'></drop-menu>

### Styling
 Custom property | Description | Default
----------------|-------------|----------
`--item-background-color` | List item backround color | `#f1ecef`
`--item-color` | List item color used for fonts | `#302f31`
`--button-close-color` | Icon button hover color | `4775D1`
`--button-background-color` | Drop menu's background color | `white`
`--button-close-color` | Icon button hover color | `4775D1`
`--icon-button` | Mixin applied the icon button | `{}`

@demo demo/drop-menu-demo.html
-->
<dom-module id="treble-led">
    <template>
        <style accordionButton>
            [wrapper]{
                height:6.8vh;
                width:6.8vh;
            }
            [circle] {
                position: absolute;
                background-color: var(--content-background,#fafafa);
                border-radius: 100%;
                height: 6.8vh;
                width: 6.8vh;
            }
            [circle]:hover {
                cursor: pointer;
            }
            [shadow]{
                position: absolute;
                margin-top: 0.8vh;
                background-color: var(--ac-led-shadow,gray);
            }
        </style>
        <style acLed>
            [acLed] {
                position: absolute;
                border-radius: 100%;
                height:6.8vh;
                width:6.8vh;
                background-color:purple;
            }
            /* override default*/
            /*[note]{
                position: absolute;
                font-size: 20px ;
                margin-left: 10px ;
                color:pink ;
            }*/
        </style>
        <style GUIAction>
            .closing{
                background-color: var(--theme-color1,#4775D1) ;
            }
            .opening{
                background-color: var(--theme-color2,#CC6666) ;
            }
            .hidden{
                visibility: hidden ;
            }
            .visible{
                visibility: visible ;
            }
        </style>

        <div wrapper>
            <div circle shadow></div>
            <div circle ></div>
            <div acLed>
                <!-- override default -->
                <!-- <div note>
                    F#
                </div> -->
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: "treble-led",
            observers: [],
            behaviors: [acLedBehavior],
            listeners: {},
            properties: {
                instrumentNote: {
                    type: String,
                    value: ""
                },
                playBackNote: {
                    type: String,
                    value: ""
                },
                closeNoteIndex:{
                    type:Number,
                    observer:'_computeCloseNote'
                },
                openNoteIndex:{
                    type:Number,
                    observer:'_computeOpenNote'
                },
                openNote:{
                    type:String
                },
                closeNote:{
                    type:String
                }
            },
            _getAcLedColor: function(acLedState){
                if (acLedState === 1) {
                    return 'blue' ;
                }
                if (acLedState === 2) {
                    return 'red' ;
                }
            },
            _computeCloseNote: function(){
                this.closeNote= this._noteNumberToName(this.closeNoteIndex);
            },
            _computeOpenNote: function(){
                this.openNote= this._noteNumberToName(this.openNoteIndex);
            },
            _noteNumberToName: function (note) {
                if (this.acLedType === 'bass_chord')
                    return "";
                return this._getNoteName(note);
            },
            _computeColor: function (state, which) {
                if (state === 1) {
                    if (which === 0)
                        this.instrumentNote =  this.closeNote ;
                    else {
                        this.playBackNote = this.closeNote ;
                    }
                    return 'closing';
                } else {
                    if (which === 0)
                        this.instrumentNote = this.openNote ;
                    else {
                        this.playBackNote = this.openNote ;
                    }
                    return 'opening';
                }
            },
            _computeVisibility: function (state) {
                if (state === 0)
                    return 'hidden';
                return 'visible';
            }
        });
    </script>
</dom-module>
